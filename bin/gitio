#!/usr/bin/env bash

# gitio
#
# Shorten URLs using https://git.io
#
# USAGE:
#   $ gitio <url>

main() {
	local url = "$1";

	if [ -t 0 ]; then
		if [ -z "${url}" ]; then
			echo "Usage: \`gitio <url>\`";
			return 1;
		fi;
	else
		read url
	fi

	curl -s -L -q -i https://git.io/ -F "url=${url}" | grep location | cut -d' ' -f2 | pbcopy;
	pbpaste
}

main;
